
	<!-- findbugs: $[moduleName] -->

	<taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask"/>

	<property name="$[moduleName].findbugs.dir" value="${output.dir}/findbugs/$[moduleName]"/>

	<target name="findbugs.$[moduleName]" depends="build.$[moduleName]" description="creates findbugs report for module: $[moduleName]">
		<available classname="edu.umd.cs.findbugs.anttask.FindBugsTask" property="findbugs.present"/>
		<fail unless="findbugs.present" message="Please copy 'findbugs-ant.jar' into ${env.ANT_HOME}/lib"/>
		<mkdir dir="${$[moduleName].findbugs.dir}"/> 
		<findbugs home="${findbugs.home}"
				  output="html"
				  outputFile="${$[moduleName].findbugs.dir}/findbugs.html"
				  effort="max"
				  jvmargs="-Xmx256m">
			<auxClasspath>
				<path refid="$[moduleName].production.classpath"/>
			</auxClasspath>
			<sourcePath path="${$[moduleName].production.src.dir}"/>
			<class location="${$[moduleName].production.out.dir}"/>
		</findbugs>
	</target>
